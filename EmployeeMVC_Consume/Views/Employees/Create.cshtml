@model EmployeeMVC_Consume.ViewModels.EmployeeVM
<h2>Create Employee</h2>

<form asp-action="Create" method="post">
    <div class="form-group">
        <label asp-for="Name" class="control-label"></label>
        <input asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="Position" class="control-label"></label>
        <input asp-for="Position" class="form-control" />
        <span asp-validation-for="Position" class="text-danger"></span>
    </div>

    <div class="form-group">
        <label asp-for="DepartmentId" class="control-label"></label>
        <select asp-for="DepartmentId" class="form-control" id="DepartmentId">
            <option value="">Select Department</option>
            
        </select>
        <span asp-validation-for="DepartmentId" class="text-danger"></span>
    </div>
   
   <div class="form-group mt-3">
        <input type="submit" value="Create" class="btn btn-primary" />
         <a asp-action="Index" class="btn btn-secondary">Back to List</a>
   </div>

</form>

@section Scripts {
   <script>
      $(document).ready(function(){
         $.ajax({
                    url: 'https://localhost:7164/api/Departments/',
                    type: 'GET',
                    contentType: 'application/json',
                    success: function (data) {
                        console.log(data);
                         $.each(data, function(index, department) {
                           $("#DepartmentId").append('<option value="' + department.Id + '">' + department.Name + '</option>')
                           
                         });
                    },
                    error: function (xhr, status, error) {
                        console.log('Error saving employee data:', error);
                    }
                });
      });
          

          
   </script>
}
